<!doctype html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Ejemplo Control Video con JavaScript</title>

		<style>
			body {
				background: url(imagenes/fondo_granulado.png);
				text-align: center;
			}

			div {
				border-style: solid;
				border-color: 1px solid rgb(181, 181, 181);
				margin-left: auto;
				margin-right: auto;
				margin-bottom: 20px;
				color: rgb(77, 77, 77);
				background-color: rgb(238, 238, 238);
				padding: 20px;
				/*esquinas redondas*/
				-webkit-border-radius: 10px;
				-moz-border-radius: 10px;
				border-radius: 10px;
				/*sombras*/
				-webkit-box-shadow: rgb(80,80,80) 4px 3px 7px;
				-moz-box-shadow: rgb(80,80,80) 4px 3px 7px;
				box-shadow: rgb(80,80,80) 4px 3px 7px;
				width:800px;
			}
		</style>

		<script type="text/javascript">
			var LIMITE_REPETICIONES = 2;
			var contadorVideo = 1;

			var cambiarVideo = function() {

				if (contadorVideo < LIMITE_REPETICIONES) {

					alert("contadorVideo:" + contadorVideo)
					var miVideo = document.querySelector("video");
					miVideo.play();

					//PARTE CLAVE
					contadorVideo = contadorVideo + 1;
				} else {
					alert("limite repeticiones alcanzado");
				}
			}

			window.onload = function() {

				var miVideo = document.querySelector("video");
				miVideo.addEventListener("ended", cambiarVideo);

			}

		</script>
	</head>
	<body>
		<div class="video-player" >
			<video controls>
				<source src="videos/gadget.mp4" >
				<source src="videos/gadget.ogg" >
				<source src="videos/gadget.webm" >
			</video>
		</div>
	</body>
</html>